import{k as N,h as v,d as O,o as E,c as r,a as e,F as h,r as k,b as U,e as i,v as c,f as C,i as x,j as d,t as o,_ as G}from"./index-DZgEsRqK.js";import{a as w}from"./client-CnkACndt.js";const K=N("admin",()=>{const V=v([]),a=v([]),P=v([]),b=v([]),_=v([]);async function A(){const{data:s}=await w.get("/products");return V.value=s,s}async function T(){const{data:s}=await w.get("/warehouses");return a.value=s,s}async function m(){const{data:s}=await w.get("/suppliers");return P.value=s,s}async function y(){const{data:s}=await w.get("/lanes");return b.value=s,s}async function f(s,u){const g=new URLSearchParams;s&&g.set("sku",s),u&&g.set("warehouse_code",u);const{data:W}=await w.get(`/planning-policies?${g}`);return _.value=W,W}async function p(s){const{data:u}=await w.post("/products",s);return V.value.push(u),u}async function n(s){const{data:u}=await w.post("/warehouses",s);return a.value.push(u),u}async function L(s){const{data:u}=await w.post("/suppliers",s);return P.value.push(u),u}async function R(s){const{data:u}=await w.post("/lanes",s);return b.value.push(u),u}async function q(s){const{data:u}=await w.post("/planning-policies",s);return _.value.push(u),u}return{products:V,warehouses:a,suppliers:P,lanes:b,planningPolicies:_,fetchProducts:A,fetchWarehouses:T,fetchSuppliers:m,fetchLanes:y,fetchPlanningPolicies:f,createProduct:p,createWarehouse:n,createSupplier:L,createLane:R,createPlanningPolicy:q}}),M={class:"page-content-inner"},D={class:"content-section"},F={class:"app-table-wrap"},B={class:"app-table"},j={class:"content-section"},I={class:"app-table-wrap"},$={class:"app-table"},z={class:"content-section"},H={class:"app-table-wrap"},J={class:"app-table"},Q={class:"content-section"},X={class:"app-table-wrap"},Y={class:"app-table"},Z=["value"],ee=["value"],te={class:"content-section"},le={class:"app-table-wrap"},se={class:"app-table"},ae=O({__name:"AdminView",setup(V){const a=K(),P=x(()=>a.products),b=x(()=>a.warehouses),_=x(()=>a.suppliers),A=x(()=>a.lanes),T=x(()=>a.planningPolicies),m=v({sku:"",name:"",description:""}),y=v({code:"",name:""}),f=v({code:"",name:""}),p=v({supplier_id:0,warehouse_id:0,code:""}),n=v({sku:"",warehouse_code:"",mode:"WOS_TARGET",target_weeks:"4",safety_stock_weeks:"1",forecast_window_weeks:8});function L(S){var t;return((t=a.suppliers.find(l=>l.id===S))==null?void 0:t.code)??S}function R(S){var t;return((t=a.warehouses.find(l=>l.id===S))==null?void 0:t.code)??S}async function q(){await a.createProduct(m.value),m.value={sku:"",name:"",description:""}}async function s(){await a.createWarehouse(y.value),y.value={code:"",name:""}}async function u(){await a.createSupplier(f.value),f.value={code:"",name:""}}async function g(){p.value.supplier_id&&p.value.warehouse_id&&(await a.createLane({supplier_id:p.value.supplier_id,warehouse_id:p.value.warehouse_id,code:p.value.code||void 0}),p.value={supplier_id:0,warehouse_id:0,code:""})}async function W(){await a.createPlanningPolicy({sku:n.value.sku,warehouse_code:n.value.warehouse_code,mode:n.value.mode??"WOS_TARGET",target_weeks:n.value.target_weeks??"4",safety_stock_weeks:n.value.safety_stock_weeks??"1",forecast_window_weeks:n.value.forecast_window_weeks??8}),n.value={sku:"",warehouse_code:"",mode:"WOS_TARGET",target_weeks:"4",safety_stock_weeks:"1",forecast_window_weeks:8}}return E(async()=>{await Promise.all([a.fetchProducts(),a.fetchWarehouses(),a.fetchSuppliers(),a.fetchLanes(),a.fetchPlanningPolicies()])}),(S,t)=>(d(),r("div",M,[t[34]||(t[34]=e("p",{class:"muted"},"Products, Warehouses, Suppliers/Lanes, Planning Policies.",-1)),e("section",D,[t[18]||(t[18]=e("h2",null,"Products",-1)),e("div",F,[e("table",B,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",null,"SKU"),e("th",null,"Name"),e("th",null,"Description")])],-1)),e("tbody",null,[(d(!0),r(h,null,k(P.value,l=>(d(),r("tr",{key:l.id},[e("td",null,o(l.sku),1),e("td",null,o(l.name??"—"),1),e("td",null,o(l.description??"—"),1)]))),128))])])]),e("form",{onSubmit:U(q,["prevent"]),class:"form-inline"},[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>m.value.sku=l),class:"app-input",placeholder:"SKU",required:"",style:{"max-width":"8rem"}},null,512),[[c,m.value.sku]]),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>m.value.name=l),class:"app-input",placeholder:"Name",style:{"max-width":"10rem"}},null,512),[[c,m.value.name]]),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>m.value.description=l),class:"app-input",placeholder:"Description",style:{"max-width":"14rem"}},null,512),[[c,m.value.description]]),t[17]||(t[17]=e("button",{type:"submit",class:"app-btn app-btn-primary"},"Add product",-1))],32)]),e("section",j,[t[21]||(t[21]=e("h2",null,"Warehouses",-1)),e("div",I,[e("table",$,[t[19]||(t[19]=e("thead",null,[e("tr",null,[e("th",null,"Code"),e("th",null,"Name")])],-1)),e("tbody",null,[(d(!0),r(h,null,k(b.value,l=>(d(),r("tr",{key:l.id},[e("td",null,o(l.code),1),e("td",null,o(l.name??"—"),1)]))),128))])])]),e("form",{onSubmit:U(s,["prevent"]),class:"form-inline"},[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>y.value.code=l),class:"app-input",placeholder:"Code",required:"",style:{"max-width":"8rem"}},null,512),[[c,y.value.code]]),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>y.value.name=l),class:"app-input",placeholder:"Name",style:{"max-width":"10rem"}},null,512),[[c,y.value.name]]),t[20]||(t[20]=e("button",{type:"submit",class:"app-btn app-btn-primary"},"Add warehouse",-1))],32)]),e("section",z,[t[24]||(t[24]=e("h2",null,"Suppliers",-1)),e("div",H,[e("table",J,[t[22]||(t[22]=e("thead",null,[e("tr",null,[e("th",null,"Code"),e("th",null,"Name")])],-1)),e("tbody",null,[(d(!0),r(h,null,k(_.value,l=>(d(),r("tr",{key:l.id},[e("td",null,o(l.code),1),e("td",null,o(l.name??"—"),1)]))),128))])])]),e("form",{onSubmit:U(u,["prevent"]),class:"form-inline"},[i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>f.value.code=l),class:"app-input",placeholder:"Code",required:"",style:{"max-width":"8rem"}},null,512),[[c,f.value.code]]),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>f.value.name=l),class:"app-input",placeholder:"Name",style:{"max-width":"10rem"}},null,512),[[c,f.value.name]]),t[23]||(t[23]=e("button",{type:"submit",class:"app-btn app-btn-primary"},"Add supplier",-1))],32)]),e("section",Q,[t[29]||(t[29]=e("h2",null,"Lanes (Supplier → Warehouse)",-1)),e("div",X,[e("table",Y,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",null,"Supplier"),e("th",null,"Warehouse"),e("th",null,"Code")])],-1)),e("tbody",null,[(d(!0),r(h,null,k(A.value,l=>(d(),r("tr",{key:l.id},[e("td",null,o(L(l.supplier_id)),1),e("td",null,o(R(l.warehouse_id)),1),e("td",null,o(l.code??"—"),1)]))),128))])])]),e("form",{onSubmit:U(g,["prevent"]),class:"form-inline"},[i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>p.value.supplier_id=l),class:"app-select",required:"",style:{"max-width":"10rem"}},[t[26]||(t[26]=e("option",{value:0},"Supplier",-1)),(d(!0),r(h,null,k(_.value,l=>(d(),r("option",{key:l.id,value:l.id},o(l.code),9,Z))),128))],512),[[C,p.value.supplier_id]]),i(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>p.value.warehouse_id=l),class:"app-select",required:"",style:{"max-width":"10rem"}},[t[27]||(t[27]=e("option",{value:0},"Warehouse",-1)),(d(!0),r(h,null,k(b.value,l=>(d(),r("option",{key:l.id,value:l.id},o(l.code),9,ee))),128))],512),[[C,p.value.warehouse_id]]),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>p.value.code=l),class:"app-input",placeholder:"Lane code",style:{"max-width":"8rem"}},null,512),[[c,p.value.code]]),t[28]||(t[28]=e("button",{type:"submit",class:"app-btn app-btn-primary"},"Add lane",-1))],32)]),e("section",te,[t[33]||(t[33]=e("h2",null,"Planning Policies (SKU × Warehouse)",-1)),e("div",le,[e("table",se,[t[30]||(t[30]=e("thead",null,[e("tr",null,[e("th",null,"SKU"),e("th",null,"Warehouse"),e("th",null,"Mode"),e("th",null,"Target weeks"),e("th",null,"Safety weeks"),e("th",null,"Forecast window")])],-1)),e("tbody",null,[(d(!0),r(h,null,k(T.value,l=>(d(),r("tr",{key:l.id},[e("td",null,o(l.sku),1),e("td",null,o(l.warehouse_code),1),e("td",null,o(l.mode),1),e("td",null,o(l.target_weeks),1),e("td",null,o(l.safety_stock_weeks),1),e("td",null,o(l.forecast_window_weeks),1)]))),128))])])]),e("form",{onSubmit:U(W,["prevent"]),class:"form-inline form-wide"},[i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>n.value.sku=l),class:"app-input",placeholder:"SKU",required:"",style:{"max-width":"8rem"}},null,512),[[c,n.value.sku]]),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>n.value.warehouse_code=l),class:"app-input",placeholder:"Warehouse code",required:"",style:{"max-width":"10rem"}},null,512),[[c,n.value.warehouse_code]]),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=l=>n.value.mode=l),class:"app-select",style:{"max-width":"10rem"}},[...t[31]||(t[31]=[e("option",{value:"WOS_TARGET"},"WOS_TARGET",-1),e("option",{value:"ROP"},"ROP",-1)])],512),[[C,n.value.mode]]),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>n.value.target_weeks=l),type:"number",step:"0.1",class:"app-input",placeholder:"Target weeks",style:{"max-width":"6rem"}},null,512),[[c,n.value.target_weeks,void 0,{number:!0}]]),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>n.value.safety_stock_weeks=l),type:"number",step:"0.1",class:"app-input",placeholder:"Safety weeks",style:{"max-width":"6rem"}},null,512),[[c,n.value.safety_stock_weeks,void 0,{number:!0}]]),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>n.value.forecast_window_weeks=l),type:"number",class:"app-input",placeholder:"Forecast window",style:{"max-width":"6rem"}},null,512),[[c,n.value.forecast_window_weeks,void 0,{number:!0}]]),t[32]||(t[32]=e("button",{type:"submit",class:"app-btn app-btn-primary"},"Add policy",-1))],32)])]))}}),oe=G(ae,[["__scopeId","data-v-a61cf09e"]]);export{oe as default};
